<!DOCTYPE html>
<html>

<head>
  <base href="/">

  <title>ODS Widgets Sandbox</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://opendatasoft.github.io/ods-widgets/dist/ods-widgets.css">
</head>

<body>

  <div class="ng-cloak" ng-app="ods-widgets">

    <ods-dataset-context
        context="ctx"
        ctx-dataset="us-hospitals"
        ctx-domain="discovery">

      <h2>
        {{ ctx.dataset.metas.records_count | number }} hospitals
        <i class="fa fa-hospital-o" aria-hidden="true"></i>
      </h2>

      <ods-text-search context="ctx" placeholder="NY, Psychiatric, Health"></ods-text-search>
      <ods-table context="ctx" sort="nom"></ods-table>
      <ods-map context="ctx" location="12,34.07143,-118.39588" basemap="land"></ods-map>

    </ods-dataset-context>

  </div>

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.7/angular.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.7/angular-sanitize.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.7/i18n/angular-locale_fr-fr.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/locale/fr.js"></script>
  <script type="text/javascript" src="//opendatasoft.github.io/ods-widgets/dist/ods-widgets.js"></script>

  <script type="text/javascript">
    var ods = angular.module('ods-widgets');
    ods.run(function(gettextCatalog) {
      gettextCatalog.setStrings('fr', {
        'Clear all': 'Tout effacer',
        'More': 'Voir plus',
        'Less': 'Voir moins',
        'Download image': 'Télécharger l\'image'
      });
      gettextCatalog.setCurrentLanguage('fr');
    });
  </script>

  <script type="text/javascript">
    angular.module('ods-widgets').config(function($locationProvider) {
      $locationProvider.html5Mode(true);
    });
  </script>

  <script type="text/javascript">
    angular.module('ods-widgets').config(function(ODSWidgetsConfigProvider) {
      ODSWidgetsConfigProvider.setConfig({
          "basemaps": [
            {
               "label": "Stamen",
               "provider": "stamen.toner"
            },
            {
              "url": "https://{s}.tile.thunderforest.com/landscape/{z}/{x}/{y}.png",
              "strictTMS": false,
              "provider": "custom",
              "label": "Thunderforest",
              "id": "land"
            }
          ]
          });
    });
  </script>

</body>

</html>
